# Description

This repository contains the implementation of solution methods presented in the paper "Dynamic Facility Location Problem under Cumulative Customer Demand" published in Transportation Science.

# Instructions

First, install Python packages through the ``requirements.txt`` file:

```
pip install -r requirements.txt
```

Please make sure that you have Gurobi installed with a valid license.

Then, compile the analytical procedure, written in C, with a compiler:

```
gcc -Wall -g -shared -o libanalytical.so -fPIC analytical.c
```

Now, let us create the instance benchmark employed in the experiments:

```
python creator-benchmark.py network 2
```

You should now be able to run the solution methods presented in the paper.

For example, consider instance ``bmk_1-50-1-5-1-identical-large-fixed-0``.

We can solve it with the double-index formulation as follows:

```
python run-network.py bmk_1-50-1-5-1-identical-large-fixed-0
```

Running the command should yield an output similar to the one below:

```

-----------------------------------------------------------------------------------

Generating instance parameters

-----------------------------------------------------------------------------------

Keyword: bmk_1-50-1-5-1-identical-large-fixed-0
Facilities: [1, 1, 1, 1, 1]
Customers: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '50']
        | j: #  [I]
        | 1: 5  ['5', '6', '26', '40', '42']
                [48, 47, 46, 49, 50]
                [1, 1, 1, 1, 1]
        | 2: 5  ['7', '18', '38', '45', '49']
                [49, 48, 50, 46, 47]
                [1, 1, 1, 1, 1]
        | 3: 5  ['14', '18', '28', '33', '46']
                [47, 49, 50, 46, 48]
                [1, 1, 1, 1, 1]
        | 4: 5  ['10', '11', '15', '20', '23']
                [47, 50, 49, 46, 48]
                [1, 1, 1, 1, 1]
        | 5: 5  ['4', '11', '17', '31', '49']
                [49, 46, 47, 50, 48]
                [1, 1, 1, 1, 1]
        | 6: 5  ['1', '14', '36', '37', '42']
                [49, 47, 50, 46, 48]
                [1, 1, 1, 1, 1]
        | 7: 5  ['9', '15', '17', '23', '24']
                [47, 46, 50, 49, 48]
                [1, 1, 1, 1, 1]
        | 8: 5  ['11', '17', '23', '29', '47']
                [50, 49, 47, 46, 48]
                [1, 1, 1, 1, 1]
        | 9: 5  ['1', '10', '29', '31', '33']
                [47, 48, 46, 49, 50]
                [1, 1, 1, 1, 1]
        | 10: 5 ['6', '23', '25', '27', '33']
                [49, 50, 48, 47, 46]
                [1, 1, 1, 1, 1]
        | 11: 5 ['10', '13', '19', '23', '27']
                [48, 46, 50, 49, 47]
                [1, 1, 1, 1, 1]
        | 12: 5 ['2', '4', '10', '16', '25']
                [50, 46, 49, 47, 48]
                [1, 1, 1, 1, 1]
        | 13: 5 ['27', '28', '30', '34', '41']
                [47, 46, 48, 49, 50]
                [1, 1, 1, 1, 1]
        | 14: 5 ['5', '26', '28', '30', '42']
                [46, 50, 48, 47, 49]
                [1, 1, 1, 1, 1]
        | 15: 5 ['17', '29', '33', '37', '41']
                [46, 50, 48, 47, 49]
                [1, 1, 1, 1, 1]
        | 16: 5 ['15', '17', '30', '33', '36']
                [46, 49, 47, 50, 48]
                [1, 1, 1, 1, 1]
        | 17: 5 ['10', '12', '16', '42', '44']
                [47, 46, 48, 50, 49]
                [1, 1, 1, 1, 1]
        | 18: 5 ['5', '9', '27', '34', '46']
                [47, 48, 50, 46, 49]
                [1, 1, 1, 1, 1]
        | 19: 5 ['6', '27', '30', '39', '41']
                [46, 47, 50, 48, 49]
                [1, 1, 1, 1, 1]
        | 20: 5 ['8', '31', '36', '40', '50']
                [47, 49, 50, 48, 46]
                [1, 1, 1, 1, 1]
        | 21: 5 ['5', '14', '19', '32', '43']
                [48, 49, 47, 50, 46]
                [1, 1, 1, 1, 1]
        | 22: 5 ['7', '18', '21', '31', '44']
                [49, 47, 46, 50, 48]
                [1, 1, 1, 1, 1]
        | 23: 5 ['10', '13', '29', '43', '49']
                [49, 48, 50, 46, 47]
                [1, 1, 1, 1, 1]
        | 24: 5 ['4', '6', '14', '44', '47']
                [50, 49, 47, 48, 46]
                [1, 1, 1, 1, 1]
        | 25: 5 ['14', '20', '32', '41', '46']
                [48, 49, 46, 47, 50]
                [1, 1, 1, 1, 1]
        | 26: 5 ['17', '18', '20', '42', '44']
                [49, 50, 48, 46, 47]
                [1, 1, 1, 1, 1]
        | 27: 5 ['4', '11', '16', '32', '42']
                [50, 49, 48, 46, 47]
                [1, 1, 1, 1, 1]
        | 28: 5 ['9', '10', '16', '23', '48']
                [50, 47, 46, 49, 48]
                [1, 1, 1, 1, 1]
        | 29: 5 ['7', '12', '23', '34', '40']
                [49, 47, 48, 46, 50]
                [1, 1, 1, 1, 1]
        | 30: 5 ['3', '20', '27', '32', '33']
                [46, 49, 48, 47, 50]
                [1, 1, 1, 1, 1]
        | 31: 5 ['5', '9', '23', '28', '32']
                [49, 48, 46, 50, 47]
                [1, 1, 1, 1, 1]
        | 32: 5 ['21', '24', '29', '36', '50']
                [49, 48, 47, 50, 46]
                [1, 1, 1, 1, 1]
        | 33: 5 ['16', '17', '29', '40', '43']
                [48, 47, 49, 50, 46]
                [1, 1, 1, 1, 1]
        | 34: 5 ['11', '18', '31', '45', '46']
                [49, 50, 46, 48, 47]
                [1, 1, 1, 1, 1]
        | 35: 5 ['8', '9', '39', '41', '49']
                [49, 46, 50, 47, 48]
                [1, 1, 1, 1, 1]
        | 36: 5 ['11', '14', '30', '38', '45']
                [50, 49, 47, 48, 46]
                [1, 1, 1, 1, 1]
        | 37: 5 ['12', '27', '32', '39', '40']
                [50, 48, 47, 46, 49]
                [1, 1, 1, 1, 1]
        | 38: 5 ['4', '23', '28', '40', '44']
                [46, 48, 49, 47, 50]
                [1, 1, 1, 1, 1]
        | 39: 5 ['15', '17', '18', '23', '30']
                [47, 50, 48, 49, 46]
                [1, 1, 1, 1, 1]
        | 40: 5 ['3', '14', '22', '28', '48']
                [48, 49, 46, 50, 47]
                [1, 1, 1, 1, 1]
        | 41: 5 ['11', '17', '26', '28', '37']
                [48, 46, 47, 49, 50]
                [1, 1, 1, 1, 1]
        | 42: 5 ['8', '12', '23', '48', '50']
                [47, 46, 49, 50, 48]
                [1, 1, 1, 1, 1]
        | 43: 5 ['23', '26', '37', '43', '50']
                [47, 49, 50, 48, 46]
                [1, 1, 1, 1, 1]
        | 44: 5 ['2', '10', '13', '28', '40']
                [49, 50, 47, 46, 48]
                [1, 1, 1, 1, 1]
        | 45: 5 ['4', '7', '10', '24', '40']
                [47, 49, 48, 50, 46]
                [1, 1, 1, 1, 1]
        | 46: 5 ['7', '21', '23', '37', '48']
                [46, 47, 48, 49, 50]
                [1, 1, 1, 1, 1]
        | 47: 5 ['3', '8', '17', '31', '44']
                [49, 50, 46, 47, 48]
                [1, 1, 1, 1, 1]
        | 48: 5 ['5', '11', '17', '35', '42']
                [47, 50, 48, 49, 46]
                [1, 1, 1, 1, 1]
        | 49: 5 ['17', '39', '41', '42', '46']
                [46, 47, 49, 50, 48]
                [1, 1, 1, 1, 1]
        | 50: 5 ['12', '17', '18', '22', '34']
                [48, 47, 46, 50, 49]
                [1, 1, 1, 1, 1]
Locations: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '50']
        | i: #  [J]
        | 1 (50) : 2    ['6', '9']
        | 2 (50) : 2    ['12', '44']
        | 3 (50) : 3    ['30', '40', '47']
        | 4 (50) : 6    ['5', '12', '24', '27', '38', '45']
        | 5 (50) : 6    ['1', '14', '18', '21', '31', '48']
        | 6 (50) : 4    ['1', '10', '19', '24']
        | 7 (50) : 5    ['2', '22', '29', '45', '46']
        | 8 (50) : 4    ['20', '35', '42', '47']
        | 9 (50) : 5    ['7', '18', '28', '31', '35']
        | 10 (50) : 9   ['4', '9', '11', '12', '17', '23', '28', '44', '45']
        | 11 (50) : 8   ['4', '5', '8', '27', '34', '36', '41', '48']
        | 12 (50) : 5   ['17', '29', '37', '42', '50']
        | 13 (50) : 3   ['11', '23', '44']
        | 14 (50) : 7   ['3', '6', '21', '24', '25', '36', '40']
        | 15 (50) : 4   ['4', '7', '16', '39']
        | 16 (50) : 5   ['12', '17', '27', '28', '33']
        | 17 (50) : 13  ['5', '7', '8', '15', '16', '26', '33', '39', '41', '47', '48', '49', '50']
        | 18 (50) : 7   ['2', '3', '22', '26', '34', '39', '50']
        | 19 (50) : 2   ['11', '21']
        | 20 (50) : 4   ['4', '25', '26', '30']
        | 21 (50) : 3   ['22', '32', '46']
        | 22 (50) : 2   ['40', '50']
        | 23 (50) : 13  ['4', '7', '8', '10', '11', '28', '29', '31', '38', '39', '42', '43', '46']
        | 24 (50) : 3   ['7', '32', '45']
        | 25 (50) : 2   ['10', '12']
        | 26 (50) : 4   ['1', '14', '41', '43']
        | 27 (50) : 7   ['10', '11', '13', '18', '19', '30', '37']
        | 28 (50) : 8   ['3', '13', '14', '31', '38', '40', '41', '44']
        | 29 (50) : 6   ['8', '9', '15', '23', '32', '33']
        | 30 (50) : 6   ['13', '14', '16', '19', '36', '39']
        | 31 (50) : 6   ['5', '9', '20', '22', '34', '47']
        | 32 (50) : 6   ['21', '25', '27', '30', '31', '37']
        | 33 (50) : 6   ['3', '9', '10', '15', '16', '30']
        | 34 (50) : 4   ['13', '18', '29', '50']
        | 35 (50) : 1   ['48']
        | 36 (50) : 4   ['6', '16', '20', '32']
        | 37 (50) : 5   ['6', '15', '41', '43', '46']
        | 38 (50) : 2   ['2', '36']
        | 39 (50) : 4   ['19', '35', '37', '49']
        | 40 (50) : 8   ['1', '20', '29', '33', '37', '38', '44', '45']
        | 41 (50) : 6   ['13', '15', '19', '25', '35', '49']
        | 42 (50) : 8   ['1', '6', '14', '17', '26', '27', '48', '49']
        | 43 (50) : 4   ['21', '23', '33', '43']
        | 44 (50) : 6   ['17', '22', '24', '26', '38', '47']
        | 45 (50) : 3   ['2', '34', '36']
        | 46 (50) : 5   ['3', '18', '25', '34', '49']
        | 47 (50) : 2   ['8', '24']
        | 48 (50) : 4   ['28', '40', '42', '46']
        | 49 (50) : 4   ['2', '5', '23', '35']
        | 50 (50) : 4   ['20', '32', '42', '43']

-----------------------------------------------------------------------------------

Solving the DSFLP-C-NET formulation

-----------------------------------------------------------------------------------

Set parameter Username
Academic license - for non-commercial use only - expires 2026-06-23
Set parameter Threads to value 1
Set parameter TimeLimit to value 3600

-----------------------------------------------------------------------------------

Cold MIP (i.e., without warm start)

-----------------------------------------------------------------------------------

Gurobi Optimizer version 9.5.0 build v9.5.0rc5 (win64)
Thread count: 4 physical cores, 8 logical processors, using up to 1 threads
Optimize a model with 4055 rows, 5500 columns and 43000 nonzeros
Model fingerprint: 0xe67fb30a
Variable types: 5250 continuous, 250 integer (250 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+00]
  Objective range  [5e+01, 3e+02]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 1e+00]

User MIP start produced solution with objective -0 (0.06s)
Loaded user MIP start with objective -0

Presolve removed 1150 rows and 1500 columns
Presolve time: 0.23s
Presolved: 2905 rows, 4000 columns, 65241 nonzeros
Variable types: 3750 continuous, 250 integer (250 binary)
Found heuristic solution: objective 100.0000000

Root relaxation: objective 7.150000e+03, 4643 iterations, 0.17 seconds (0.21 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0 7150.00000    0    4  100.00000 7150.00000  7050%     -    0s
H    0     0                    1500.0000000 7150.00000   377%     -    0s
H    0     0                    2250.0000000 7150.00000   218%     -    0s
H    0     0                    5500.0000000 7150.00000  30.0%     -    0s
H    0     0                    5550.0000000 7150.00000  28.8%     -    0s
     0     0 7150.00000    0    4 5550.00000 7150.00000  28.8%     -    0s
H    0     0                    7150.0000000 7150.00000  0.00%     -    0s
     0     0 7150.00000    0    4 7150.00000 7150.00000  0.00%     -    0s

Cutting planes:
  Gomory: 3

Explored 1 nodes (4651 simplex iterations) in 0.73 seconds (0.58 work units)
Thread count was 1 (of 8 available processors)

Solution count 7: 7150 5550 5500 ... -0

Optimal solution found (tolerance 1.00e-04)
Best objective 7.150000000000e+03, best bound 7.150000000000e+03, gap 0.0000%

-----------------------------------------------------------------------------------

Reporting summary for bmk_1-50-1-5-1-identical-large-fixed-0

-----------------------------------------------------------------------------------

cold_net_status: 2
cold_net_objective: 7150.0
cold_net_bound: 7150.0
cold_net_nodes: 1.0
cold_net_runtime: 0.7321
cold_net_mipgap: 0.0
cold_net_optgap: 0.0
cold_net_solution: 27-10-14-17-23
cold_net_reward: 7150.0
cold_net_penalty: 0.0
Discarded solution information

-----------------------------------------------------------------------------------

Linear programming relaxation bound

-----------------------------------------------------------------------------------

Gurobi Optimizer version 9.5.0 build v9.5.0rc5 (win64)
Thread count: 4 physical cores, 8 logical processors, using up to 1 threads
Optimize a model with 4055 rows, 5500 columns and 43000 nonzeros
Model fingerprint: 0xa05f20c6
Coefficient statistics:
  Matrix range     [1e+00, 1e+00]
  Objective range  [5e+01, 3e+02]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 1e+00]
Presolve removed 260 rows and 1355 columns
Presolve time: 0.02s
Presolved: 3795 rows, 4145 columns, 41320 nonzeros

Iteration    Objective       Primal Inf.    Dual Inf.      Time
       0    8.9000000e+04   3.129500e+03   0.000000e+00      0s
    4177    7.1500000e+03   0.000000e+00   0.000000e+00      0s

Solved in 4177 iterations and 0.23 seconds (0.28 work units)
Optimal objective  7.150000000e+03
Discarded solution information
```